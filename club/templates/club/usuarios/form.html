{% extends 'club/base.html' %}

{% block title %}{{ title }} - Sistema Clube Vizinho Norte{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Cabeçalho -->
    <div class="row mb-4">
        <div class="col">
            <h1 class="h3 mb-0">
                <i class="bi bi-person-plus"></i>
                {{ title }}
            </h1>
            <p class="text-muted">Preencha os dados do usuário</p>
        </div>
        <div class="col-auto">
            <a href="{% url 'club:usuarios_list' %}" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i>
                Voltar
            </a>
        </div>
    </div>
    
    <!-- Formulário -->
    <div class="row">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-person-fill"></i>
                        Dados do Usuário
                    </h5>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        
                        <!-- Dados de Login -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="border-bottom pb-2 mb-3">
                                    <i class="bi bi-key"></i>
                                    Dados de Login
                                </h6>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.username.id_for_label }}" class="form-label">{{ form.username.label }}</label>
                                    {{ form.username }}
                                    {% if form.username.errors %}
                                        <div class="text-danger small">{{ form.username.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.email.id_for_label }}" class="form-label">{{ form.email.label }}</label>
                                    {{ form.email }}
                                    {% if form.email.errors %}
                                        <div class="text-danger small">{{ form.email.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.password1.id_for_label }}" class="form-label">{{ form.password1.label }}</label>
                                    {{ form.password1 }}
                                    {% if form.password1.errors %}
                                        <div class="text-danger small">{{ form.password1.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.password2.id_for_label }}" class="form-label">{{ form.password2.label }}</label>
                                    {{ form.password2 }}
                                    {% if form.password2.errors %}
                                        <div class="text-danger small">{{ form.password2.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <!-- Dados Pessoais -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="border-bottom pb-2 mb-3">
                                    <i class="bi bi-person"></i>
                                    Dados Pessoais
                                </h6>
                            </div>
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label for="{{ form.nome_completo.id_for_label }}" class="form-label">{{ form.nome_completo.label }}</label>
                                    {{ form.nome_completo }}
                                    {% if form.nome_completo.errors %}
                                        <div class="text-danger small">{{ form.nome_completo.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="{{ form.cpf.id_for_label }}" class="form-label">{{ form.cpf.label }}</label>
                                    {{ form.cpf }}
                                    {% if form.cpf.errors %}
                                        <div class="text-danger small">{{ form.cpf.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.telefone.id_for_label }}" class="form-label">{{ form.telefone.label }}</label>
                                    {{ form.telefone }}
                                    {% if form.telefone.errors %}
                                        <div class="text-danger small">{{ form.telefone.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="{{ form.tipo_usuario.id_for_label }}" class="form-label">{{ form.tipo_usuario.label }}</label>
                                    {{ form.tipo_usuario }}
                                    {% if form.tipo_usuario.errors %}
                                        <div class="text-danger small">{{ form.tipo_usuario.errors.0 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <!-- Permissões -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="border-bottom pb-2 mb-3">
                                    <i class="bi bi-shield-check"></i>
                                    Permissões do Sistema
                                </h6>
                                <p class="text-muted small">
                                    <i class="bi bi-info-circle"></i>
                                    Marque os módulos que o usuário poderá acessar. Gestoras têm acesso automático a todos os módulos.
                                </p>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check mb-3">
                                    {{ form.pode_gerenciar_socios }}
                                    <label class="form-check-label" for="{{ form.pode_gerenciar_socios.id_for_label }}">
                                        <i class="bi bi-person-badge"></i>
                                        Gerenciar Sócios
                                    </label>
                                </div>
                                <div class="form-check mb-3">
                                    {{ form.pode_gerenciar_financeiro }}
                                    <label class="form-check-label" for="{{ form.pode_gerenciar_financeiro.id_for_label }}">
                                        <i class="bi bi-currency-dollar"></i>
                                        Gerenciar Financeiro
                                    </label>
                                </div>
                                <div class="form-check mb-3">
                                    {{ form.pode_gerenciar_locacoes }}
                                    <label class="form-check-label" for="{{ form.pode_gerenciar_locacoes.id_for_label }}">
                                        <i class="bi bi-calendar-check"></i>
                                        Gerenciar Locações
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check mb-3">
                                    {{ form.pode_gerenciar_escolas }}
                                    <label class="form-check-label" for="{{ form.pode_gerenciar_escolas.id_for_label }}">
                                        <i class="bi bi-mortarboard"></i>
                                        Gerenciar Escolas
                                    </label>
                                </div>
                                <div class="form-check mb-3">
                                    {{ form.pode_gerenciar_dayuse }}
                                    <label class="form-check-label" for="{{ form.pode_gerenciar_dayuse.id_for_label }}">
                                        <i class="bi bi-sun"></i>
                                        Gerenciar Day Use
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Botões -->
                        <div class="row">
                            <div class="col-12">
                                <div class="d-flex gap-2">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-check-circle"></i>
                                        Salvar Usuário
                                    </button>
                                    <a href="{% url 'club:usuarios_list' %}" class="btn btn-outline-secondary">
                                        <i class="bi bi-x-circle"></i>
                                        Cancelar
                                    </a>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Informações Laterais -->
        <div class="col-lg-4">
            <div class="card">
                <div class="card-header">
                    <h6 class="card-title mb-0">
                        <i class="bi bi-info-circle"></i>
                        Informações
                    </h6>
                </div>
                <div class="card-body">
                    <h6>Tipos de Usuário:</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <span class="badge bg-danger">Administrador</span>
                            <br><small class="text-muted">Acesso total ao sistema (apenas para você)</small>
                        </li>
                        <li class="mb-2">
                            <span class="badge bg-success">Gestora</span>
                            <br><small class="text-muted">Pode criar usuários e tem acesso a todos os módulos</small>
                        </li>
                        <li class="mb-2">
                            <span class="badge bg-primary">Funcionário</span>
                            <br><small class="text-muted">Acesso limitado aos módulos selecionados</small>
                        </li>
                    </ul>
                    
                    <hr>
                    
                    <h6>Módulos do Sistema:</h6>
                    <ul class="list-unstyled small">
                        <li><i class="bi bi-person-badge"></i> <strong>Sócios:</strong> Gerenciar clientes e sócios</li>
                        <li><i class="bi bi-currency-dollar"></i> <strong>Financeiro:</strong> Mensalidades e pagamentos</li>
                        <li><i class="bi bi-calendar-check"></i> <strong>Locações:</strong> Reservas de espaços</li>
                        <li><i class="bi bi-mortarboard"></i> <strong>Escolas:</strong> Escolas de esporte</li>
                        <li><i class="bi bi-sun"></i> <strong>Day Use:</strong> Visitantes avulsos</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
